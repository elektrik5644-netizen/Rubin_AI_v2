# –ü–æ–∏—Å–∫–æ–≤–∏–∫ –ø–æ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö - –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã

## üîÑ –û—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã

```
–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨
    ‚îÇ
    ‚ñº
RubinIDE.html
    ‚îÇ
    ‚ñº
HTTP POST ‚Üí /api/chat
    ‚îÇ
    ‚ñº
minimal_rubin_server.py
    ‚îÇ
    ‚ñº
–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
    ‚îÇ
    ‚ñº
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞
    ‚îÇ
    ‚ñº
HTTP Response ‚Üê JSON
    ‚îÇ
    ‚ñº
RubinIDE.html
    ‚îÇ
    ‚ñº
–û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –†–ï–ó–£–õ–¨–¢–ê–¢–ê
```

## üß† –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å

### 1. **–ò–Ω–∏—Ü–∏–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞ (Frontend)**

#### **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥:**
```javascript
function searchDocuments() {
    const query = prompt('–í–≤–µ–¥–∏—Ç–µ –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å:');
    if (query) {
        appendChatMessage('user', `üîç –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: "${query}"`);
        searchDocumentsInDatabase(query);
    }
}
```

#### **–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞:**
```javascript
async function searchDocumentsInDatabase(query) {
    const response = await fetch('http://localhost:8083/api/chat', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            query: query,
            limit: 5
        })
    });
}
```

### 2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (Backend)**

#### **–ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞:**
```python
def do_POST(self):
    if parsed_path.path == '/api/chat':
        content_length = int(self.headers['Content-Length'])
        post_data = self.rfile.read(content_length)
        data = json.loads(post_data.decode('utf-8'))
        message = data.get('message', '')
        
        response_text = self.generate_chat_response(message)
```

#### **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞:**
```python
def generate_chat_response(self, message):
    message_lower = message.lower()
    
    if "python" in message_lower:
        return "Python - –æ—Ç–ª–∏—á–Ω—ã–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è!"
    elif "plc" in message_lower:
        return "PLC –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ - –º–æ—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è!"
    elif "pmac" in message_lower:
        return "PMAC –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã - —ç—Ç–æ –º–æ—è –æ–±–ª–∞—Å—Ç—å!"
    else:
        return f"–ü–æ–Ω—è–ª –≤–∞—à –∑–∞–ø—Ä–æ—Å: '{message}'. –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?"
```

#### **–û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞:**
```python
response = {
    "response": response_text,
    "session_id": "default",
    "timestamp": time.strftime("%Y-%m-%dT%H:%M:%SZ"),
    "processing_time": 0.1
}
self.wfile.write(json.dumps(response, ensure_ascii=False).encode('utf-8'))
```

### 3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ (Frontend)**

#### **–ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
```javascript
const result = await response.json();

if (result.status === 'success') {
    const documents = result.data.results;
    if (documents.length > 0) {
        let message = `üîç –ù–∞–π–¥–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: ${documents.length}\n\n`;
        documents.forEach((doc, index) => {
            message += `${index + 1}. **${doc.filename}**\n`;
            message += `   üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: ${doc.category}\n`;
            message += `   üè∑Ô∏è –¢–µ–≥–∏: ${doc.tags.join(', ')}\n`;
            message += `   üìä –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: ${doc.relevance}\n`;
            message += `   üìÑ –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä: ${doc.content.substring(0, 100)}...\n\n`;
        });
        appendChatMessage('assistant', message);
    } else {
        appendChatMessage('assistant', 'üîç –î–æ–∫—É–º–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.');
    }
}
```

#### **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:**
```javascript
function appendChatMessage(type, message) {
    const chatMessages = document.getElementById('chat-messages');
    const messageDiv = document.createElement('div');
    messageDiv.className = `chat-message ${type}`;
    messageDiv.textContent = message;
    chatMessages.appendChild(messageDiv);
    chatMessages.scrollTop = chatMessages.scrollHeight;
}
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### **–ó–∞–ø—Ä–æ—Å (Request):**
```json
{
    "query": "Python –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ",
    "limit": 5
}
```

### **–û—Ç–≤–µ—Ç (Response):**
```json
{
    "status": "success",
    "data": {
        "results": [
            {
                "filename": "python_tutorial.py",
                "category": "python_code",
                "tags": ["python", "tutorial"],
                "relevance": 0.95,
                "content": "def hello_world():\n    print('Hello, World!')"
            }
        ]
    },
    "timestamp": "2024-01-15T10:30:00Z"
}
```

## üîç –¢–∏–ø—ã –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### **1. –ü—Ä—è–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### **2. –ö–æ–º–∞–Ω–¥—ã –≤ —á–∞—Ç–µ**
- "–Ω–∞–π–¥–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ Python"
- "–ø–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ –ø–æ PLC"
- "–∏—â–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö"

### **3. –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**
- –ü–æ–∏—Å–∫ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤

## üéØ –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞

### **1. –ê–Ω–∞–ª–∏–∑ –∑–∞–ø—Ä–æ—Å–∞**
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –ø–æ–∏—Å–∫–∞
- –†–∞—Å—á–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞

### **2. –ü–æ–∏—Å–∫ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö**
- –ü–æ–∏—Å–∫ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É
- –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Ñ–∞–π–ª–∞
- –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–≥–∞–º
- –ü–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

### **3. –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤**
- –†–∞—Å—á–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### **–û—à–∏–±–∫–∏ —Å–µ—Ç–∏:**
```javascript
try {
    const response = await fetch('http://localhost:8083/api/chat');
} catch (error) {
    appendChatMessage('error', `‚ùå –û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞: ${error.message}`);
}
```

### **–û—à–∏–±–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞:**
```python
try:
    response_text = self.generate_chat_response(message)
except Exception as e:
    response = {"error": f"Chat processing failed: {str(e)}"}
```

### **–û—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞:**
```javascript
try {
    const result = await response.json();
} catch (error) {
    appendChatMessage('error', `‚ùå –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞: ${error.message}`);
}
```

## üìà –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### **1. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
- –£—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### **2. –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è**
- –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
- –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∏ —Ç–µ–≥–∞–º

### **3. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏

## üé® –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è:**
- **–ó–∞–≥—Ä—É–∑–∫–∞** - —Å–ø–∏–Ω–Ω–µ—Ä –≤–æ –≤—Ä–µ–º—è –ø–æ–∏—Å–∫–∞
- **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **–û—à–∏–±–∫–∏** - –∫—Ä–∞—Å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- **–ü—É—Å—Ç—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** - —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

### **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:**
- **–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞** - –∂–∏—Ä–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º
- **–ö–∞—Ç–µ–≥–æ—Ä–∏—è** - —Å –∏–∫–æ–Ω–∫–æ–π –ø–∞–ø–∫–∏
- **–¢–µ–≥–∏** - —Ü–≤–µ—Ç–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
- **–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å** - –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–º –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–º
- **–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä** - –ø–µ—Ä–≤—ã–µ 100 —Å–∏–º–≤–æ–ª–æ–≤

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–∏—Å–∫–∞

### **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `limit` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 5)
- `category` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `tags` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–µ–≥–∞–º
- `date_range` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–µ
- `file_type` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É —Ñ–∞–π–ª–∞

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è:**
- –í–µ—Å –Ω–∞–∑–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞: 10
- –í–µ—Å —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ: 5
- –í–µ—Å —Ç–µ–≥–æ–≤: 8
- –í–µ—Å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: 6
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: 1.0

## üîÑ –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª

### **1. –ò–Ω–∏—Ü–∏–∞—Ü–∏—è**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –í–≤–æ–¥ –∑–∞–ø—Ä–æ—Å–∞ ‚Üí searchDocuments()
```

### **2. –û—Ç–ø—Ä–∞–≤–∫–∞**
```
Frontend ‚Üí HTTP POST ‚Üí /api/chat ‚Üí Backend
```

### **3. –û–±—Ä–∞–±–æ—Ç–∫–∞**
```
Backend ‚Üí –ü–∞—Ä—Å–∏–Ω–≥ ‚Üí generate_chat_response() ‚Üí –ü–æ–∏—Å–∫ –≤ –ë–î
```

### **4. –û—Ç–≤–µ—Ç**
```
Backend ‚Üí JSON Response ‚Üí Frontend
```

### **5. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**
```
Frontend ‚Üí –ü–∞—Ä—Å–∏–Ω–≥ ‚Üí appendChatMessage() ‚Üí UI
```

## üí° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ:**
- –ö–æ–º–∞–Ω–¥—ã –ø–æ–∏—Å–∫–∞ –≤ –æ–±—ã—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑

### **–£–º–Ω–æ–µ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –£—á–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ —Ç–∏–ø—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—á–µ—Å—Ç–≤—É

### **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç:**
- –ë—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã
- –ü–æ–Ω—è—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è
