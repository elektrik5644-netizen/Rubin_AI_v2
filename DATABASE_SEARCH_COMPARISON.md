# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–∏—Å–∫–æ–≤–∏–∫–æ–≤ –ø–æ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö: LocalAI vs Rubin AI

## üîç –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä

### **LocalAI - –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫**

LocalAI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–≤–µ–∫—Ç–æ—Ä–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö** —Å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º –ø–æ–∏—Å–∫–æ–º:

```go
// –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∏—Å–∫–∞ –≤ LocalAI
func Find(ctx context.Context, c grpc.Backend, key []float32, topk int) ([][]float32, [][]byte, []float32, error)
func SetCols(ctx context.Context, c grpc.Backend, keys [][]float32, values [][]byte) error
func GetCols(ctx context.Context, c grpc.Backend, keys [][]float32) ([][]float32, [][]byte, error)
```

### **Rubin AI - –¢–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫**

Rubin AI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **SQLite —Å –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–º –ø–æ–∏—Å–∫–æ–º**:

```python
def search_documents(self, query, limit=10):
    # –ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
    query_words = query.lower().split()
    
    # –ü–æ–∏—Å–∫ –≤ –∏–Ω–¥–µ–∫—Å–µ
    cursor.execute('''
        SELECT DISTINCT d.id, d.file_name, d.category, d.metadata, 
               GROUP_CONCAT(DISTINCT di.keyword) as matched_keywords
        FROM documents d
        JOIN document_index di ON d.id = di.document_id
        WHERE di.keyword IN ({placeholders})
        GROUP BY d.id
        ORDER BY COUNT(DISTINCT di.keyword) DESC
        LIMIT ?
    ''', query_words + [limit])
```

## üìä –î–µ—Ç–∞–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ

| –ê—Å–ø–µ–∫—Ç | LocalAI | Rubin AI |
|--------|---------|----------|
| **–¢–∏–ø –ø–æ–∏—Å–∫–∞** | –í–µ–∫—Ç–æ—Ä–Ω—ã–π (—Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π) | –¢–µ–∫—Å—Ç–æ–≤—ã–π (–∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞) |
| **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** | –í–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ | SQLite |
| **–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è** | Embeddings (–≤–µ–∫—Ç–æ—Ä—ã) | –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ |
| **–ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞** | –ö–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ | LIKE –ø–æ–∏—Å–∫ |
| **–¢–æ—á–Ω–æ—Å—Ç—å** | –í—ã—Å–æ–∫–∞—è (—Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è) | –°—Ä–µ–¥–Ω—è—è (–ª–µ–∫—Å–∏—á–µ—Å–∫–∞—è) |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | –ë—ã—Å—Ç—Ä–∞—è (O(log n)) | –ú–µ–¥–ª–µ–Ω–Ω–∞—è (O(n)) |
| **–ü–∞–º—è—Ç—å** | –í—ã—Å–æ–∫–∞—è (–≤–µ–∫—Ç–æ—Ä—ã) | –ù–∏–∑–∫–∞—è (—Ç–µ–∫—Å—Ç) |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å** | –í—ã—Å–æ–∫–∞—è | –ù–∏–∑–∫–∞—è |

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–∞–∑–ª–∏—á–∏—è

### **LocalAI - –í–µ–∫—Ç–æ—Ä–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**

```mermaid
graph TD
    A[–î–æ–∫—É–º–µ–Ω—Ç] --> B[Embedding Model]
    B --> C[–í–µ–∫—Ç–æ—Ä 768D]
    C --> D[–í–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î]
    E[–ó–∞–ø—Ä–æ—Å] --> F[Embedding Model]
    F --> G[–í–µ–∫—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–∞]
    G --> H[–ö–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ]
    D --> H
    H --> I[–¢–æ–ø-K —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤]
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ ("–º–∞—à–∏–Ω–∞" –Ω–∞–π–¥–µ—Ç "–∞–≤—Ç–æ–º–æ–±–∏–ª—å")
- ‚úÖ –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç–∏

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –¢—Ä–µ–±—É–µ—Ç –º–æ–¥–µ–ª–∏ embeddings
- ‚ùå –í—ã—Å–æ–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
- ‚ùå –°–ª–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚ùå –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∫–∞—á–µ—Å—Ç–≤–∞ –º–æ–¥–µ–ª–∏

### **Rubin AI - –¢–µ–∫—Å—Ç–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**

```mermaid
graph TD
    A[–î–æ–∫—É–º–µ–Ω—Ç] --> B[–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞]
    B --> C[–†–∞–∑–±–∏–≤–∫–∞ –Ω–∞ —Å–ª–æ–≤–∞]
    C --> D[–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤]
    D --> E[SQLite –ë–î]
    F[–ó–∞–ø—Ä–æ—Å] --> G[–†–∞–∑–±–∏–≤–∫–∞ –Ω–∞ —Å–ª–æ–≤–∞]
    G --> H[LIKE –ø–æ–∏—Å–∫]
    E --> H
    H --> I[–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏]
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ù–∏–∑–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- ‚úÖ –ü–æ–Ω—è—Ç–Ω–æ—Å—Ç—å –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –¢–æ–ª—å–∫–æ –ª–µ–∫—Å–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫
- ‚ùå –ù–∏–∑–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è —Å–∏–Ω–æ–Ω–∏–º–æ–≤
- ‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å –º–æ—Ä—Ñ–æ–ª–æ–≥–∏–µ–π
- ‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### **LocalAI - –í–µ–∫—Ç–æ—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**

```go
// –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤–µ–∫—Ç–æ—Ä–æ–≤
func normalize(vecs [][]float32) {
    for i, k := range vecs {
        norm := float64(0)
        for _, x := range k {
            norm += float64(x * x)
        }
        norm = math.Sqrt(norm)
        for j, x := range k {
            vecs[i][j] = x / float32(norm)
        }
    }
}

// –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤
keys, vals, sims, err := store.Find(context.Background(), sc, []float32{0.1, 0.3, 0.5}, 2)
```

### **Rubin AI - SQL –æ–ø–µ—Ä–∞—Ü–∏–∏**

```python
# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞
def create_search_index(self, cursor, doc_id, content):
    words = content.lower().split()
    for i, word in enumerate(words):
        if len(word) > 3:  # –¢–æ–ª—å–∫–æ –∑–Ω–∞—á–∏–º—ã–µ —Å–ª–æ–≤–∞
            cursor.execute('''
                INSERT INTO document_index (document_id, keyword, position, context)
                VALUES (?, ?, ?, ?)
            ''', (doc_id, word, i, ' '.join(words[max(0, i-5):i+6])))

# –ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
cursor.execute('''
    SELECT DISTINCT d.id, d.file_name, d.category
    FROM documents d
    JOIN document_index di ON d.id = di.document_id
    WHERE di.keyword IN (?, ?, ?)
    GROUP BY d.id
    ORDER BY COUNT(DISTINCT di.keyword) DESC
''', query_words)
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### **LocalAI**
- **–í—Ä–µ–º—è –ø–æ–∏—Å–∫–∞:** O(log n) - –ª–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–æ–µ
- **–ü–∞–º—è—Ç—å:** ~768 * 4 –±–∞–π—Ç–∞ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç
- **–¢–æ—á–Ω–æ—Å—Ç—å:** 85-95% –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –î–æ –º–∏–ª–ª–∏–æ–Ω–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### **Rubin AI**
- **–í—Ä–µ–º—è –ø–æ–∏—Å–∫–∞:** O(n) - –ª–∏–Ω–µ–π–Ω–æ–µ
- **–ü–∞–º—è—Ç—å:** ~100 –±–∞–π—Ç –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç
- **–¢–æ—á–Ω–æ—Å—Ç—å:** 60-75% –¥–ª—è —Ç–æ—á–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –î–æ —Ç—ã—Å—è—á –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è Rubin AI

### **–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**

1. **–£–ª—É—á—à–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞:**
```python
def enhanced_search_documents(self, query, limit=10):
    # –ú–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
    query_words = self.lemmatize_words(query.lower().split())
    
    # –ü–æ–∏—Å–∫ —Å –≤–µ—Å–∞–º–∏
    cursor.execute('''
        SELECT d.id, d.file_name, d.category,
               SUM(CASE 
                   WHEN di.keyword IN ({placeholders}) THEN 1.0
                   WHEN d.content LIKE ? THEN 0.5
                   ELSE 0.0
               END) as relevance_score
        FROM documents d
        LEFT JOIN document_index di ON d.id = di.document_id
        WHERE di.keyword IN ({placeholders}) OR d.content LIKE ?
        GROUP BY d.id
        ORDER BY relevance_score DESC
        LIMIT ?
    ''', query_words + [f'%{query}%'] + query_words + [f'%{query}%', limit])
```

2. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∏–Ω–æ–Ω–∏–º–æ–≤:**
```python
SYNONYMS = {
    '–º–∞—à–∏–Ω–∞': ['–∞–≤—Ç–æ–º–æ–±–∏–ª—å', '—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç', 'vehicle'],
    '–ø—Ä–æ–≥—Ä–∞–º–º–∞': ['–∫–æ–¥', '—Å–∫—Ä–∏–ø—Ç', '–∞–ª–≥–æ—Ä–∏—Ç–º'],
    '–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä': ['plc', '–º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä', '–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è']
}
```

### **–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**

1. **–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥:**
```python
class HybridSearchEngine:
    def __init__(self):
        self.text_search = TextSearchEngine()
        self.vector_search = VectorSearchEngine()
    
    def search(self, query):
        # –¢–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –¥–ª—è —Ç–æ—á–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
        text_results = self.text_search.search(query)
        
        # –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏–∫–∏
        vector_results = self.vector_search.search(query)
        
        # –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ
        return self.merge_results(text_results, vector_results)
```

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LocalAI:**
```python
def integrate_localai_search(self, query):
    # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è embedding –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞
    query_vector = self.embedding_model.encode(query)
    
    # –ü–æ–∏—Å–∫ –≤ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î LocalAI
    results = self.localai_client.find(query_vector, topk=5)
    
    return results
```

## üöÄ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### **LocalAI –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–∏—Ç Rubin AI –≤:**
- –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–º –ø–æ–Ω–∏–º–∞–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- –¢–æ—á–Ω–æ—Å—Ç–∏ –ø–æ–∏—Å–∫–∞
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### **Rubin AI –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–∏—Ç LocalAI –≤:**
- –ü—Ä–æ—Å—Ç–æ—Ç–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤
- –°–∫–æ—Ä–æ—Å—Ç–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –ü–æ–Ω—è—Ç–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞

### **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
–î–ª—è Rubin AI –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º –±—É–¥–µ—Ç **–≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥**:
1. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
2. –î–æ–±–∞–≤–∏—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å LocalAI –∫–∞–∫ –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å –¥–ª—è embeddings

–≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –ø–æ–ª—É—á–∏—Ç—å –ª—É—á—à–µ–µ –∏–∑ –æ–±–µ–∏—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä!






















