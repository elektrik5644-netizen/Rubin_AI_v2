<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ–≤–µ—Ä–∫–∞ –°—Ç–∞—Ç—É—Å–∞ Rubin AI v2.0</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .module {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
        .status-online {
            background-color: #d4edda;
            border-color: #c3e6cb;
        }
        .status-offline {
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }
        .status-checking {
            background-color: #fff3cd;
            border-color: #ffeaa7;
        }
        .status-indicator {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 10px;
        }
        .online { background-color: #28a745; }
        .offline { background-color: #dc3545; }
        .checking { background-color: #ffc107; }
        .btn {
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
        }
        .btn:hover {
            background-color: #0056b3;
        }
        .log {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 10px;
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –°—Ç–∞—Ç—É—Å–∞ Rubin AI v2.0</h1>
        
        <div class="module status-checking" id="main">
            <div>
                <span class="status-indicator checking"></span>
                <strong>AI –ß–∞—Ç (–û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä)</strong> - –ü–æ—Ä—Ç 8084
            </div>
            <div id="main-status">–ü—Ä–æ–≤–µ—Ä–∫–∞...</div>
        </div>
        
        <div class="module status-checking" id="electrical">
            <div>
                <span class="status-indicator checking"></span>
                <strong>–≠–ª–µ–∫—Ç—Ä–æ—Ç–µ—Ö–Ω–∏–∫–∞</strong> - –ü–æ—Ä—Ç 8087
            </div>
            <div id="electrical-status">–ü—Ä–æ–≤–µ—Ä–∫–∞...</div>
        </div>
        
        <div class="module status-checking" id="radiomechanics">
            <div>
                <span class="status-indicator checking"></span>
                <strong>–†–∞–¥–∏–æ–º–µ—Ö–∞–Ω–∏–∫–∞</strong> - –ü–æ—Ä—Ç 8089
            </div>
            <div id="radiomechanics-status">–ü—Ä–æ–≤–µ—Ä–∫–∞...</div>
        </div>
        
        <div class="module status-checking" id="controllers">
            <div>
                <span class="status-indicator checking"></span>
                <strong>–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã</strong> - –ü–æ—Ä—Ç 8090
            </div>
            <div id="controllers-status">–ü—Ä–æ–≤–µ—Ä–∫–∞...</div>
        </div>
        
        <div style="text-align: center; margin: 20px 0;">
            <button class="btn" onclick="checkAllStatus()">üîÑ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –í—Å–µ</button>
            <button class="btn" onclick="openAllModules()">üåê –û—Ç–∫—Ä—ã—Ç—å –í—Å–µ</button>
        </div>
        
        <div class="log" id="log">
            <div>–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞...</div>
        </div>
    </div>

    <script>
        const modules = {
            main: { port: 8084, name: 'AI –ß–∞—Ç', url: 'http://localhost:8084/health' },
            electrical: { port: 8087, name: '–≠–ª–µ–∫—Ç—Ä–æ—Ç–µ—Ö–Ω–∏–∫–∞', url: 'http://localhost:8087/api/electrical/status' },
            radiomechanics: { port: 8089, name: '–†–∞–¥–∏–æ–º–µ—Ö–∞–Ω–∏–∫–∞', url: 'http://localhost:8089/api/radiomechanics/status' },
            controllers: { port: 8090, name: '–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã', url: 'http://localhost:8090/api/controllers/status' }
        };

        function log(message) {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.innerHTML += `<div>[${timestamp}] ${message}</div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function updateStatus(moduleKey, isOnline) {
            const moduleDiv = document.getElementById(moduleKey);
            const statusDiv = document.getElementById(`${moduleKey}-status`);
            const indicator = moduleDiv.querySelector('.status-indicator');
            
            if (isOnline) {
                moduleDiv.className = 'module status-online';
                indicator.className = 'status-indicator online';
                statusDiv.textContent = '–û–ù–õ–ê–ô–ù';
            } else {
                moduleDiv.className = 'module status-offline';
                indicator.className = 'status-indicator offline';
                statusDiv.textContent = '–û–§–§–õ–ê–ô–ù';
            }
        }

        async function checkModuleStatus(moduleKey) {
            const module = modules[moduleKey];
            try {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 3000);
                
                const response = await fetch(module.url, { 
                    method: 'GET',
                    signal: controller.signal,
                    mode: 'cors'
                });
                
                clearTimeout(timeoutId);
                const isOnline = response.ok;
                updateStatus(moduleKey, isOnline);
                
                if (isOnline) {
                    log(`‚úÖ ${module.name} - –û–ù–õ–ê–ô–ù`);
                } else {
                    log(`‚ùå ${module.name} - –û–§–§–õ–ê–ô–ù (HTTP ${response.status})`);
                }
                
                return isOnline;
            } catch (error) {
                updateStatus(moduleKey, false);
                log(`‚ùå ${module.name} - –û–§–§–õ–ê–ô–ù (${error.message})`);
                return false;
            }
        }

        async function checkAllStatus() {
            log('üîÑ –ù–∞—á–∏–Ω–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π...');
            
            const promises = Object.keys(modules).map(moduleKey => checkModuleStatus(moduleKey));
            const results = await Promise.all(promises);
            const onlineCount = results.filter(r => r).length;
            
            log(`üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞: ${onlineCount}/${results.length} –º–æ–¥—É–ª–µ–π –æ–Ω–ª–∞–π–Ω`);
        }

        function openAllModules() {
            Object.keys(modules).forEach(moduleKey => {
                const module = modules[moduleKey];
                let url = module.url;
                
                if (moduleKey === 'main') {
                    url = 'http://localhost:8084/RubinIDE.html';
                }
                
                window.open(url, '_blank');
            });
            
            log('üåê –û—Ç–∫—Ä—ã—Ç—ã –≤—Å–µ –º–æ–¥—É–ª–∏ –≤ –Ω–æ–≤—ã—Ö –≤–∫–ª–∞–¥–∫–∞—Ö');
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞...');
            checkAllStatus();
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
            setInterval(checkAllStatus, 30000);
        });
    </script>
</body>
</html>























